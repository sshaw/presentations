<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>My (Mostly Ruby Related) Dotfiles and Other Stuff</title>
<meta name="author" content="(Skye Shaw •  (link (:type https :path //github.com/sshaw :format bracket :raw-link https://github.com/sshaw :application nil :search-option nil :begin 13 :end 59 :contents-begin 41 :contents-end 57 :post-blank 0 :parent #0) github.com/sshaw))"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@3.7.0/css/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@3.7.0/css/theme/moon.css" id="theme"/>

<link rel="stylesheet" href="styles.css"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://cdn.jsdelivr.net/npm/reveal.js@3.7.0/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">My (Mostly Ruby Related) Dotfiles and Other Stuff</h1><h2 class="author">Skye Shaw • <a href="https://github.com/sshaw">github.com/sshaw</a></h2>
</section>

<section>
<section id="slide-orgfd4ba72">
<h2 id="orgfd4ba72">REPL</h2>
<div class="outline-text-2" id="text-orgfd4ba72">
</div>
</section>
<section id="slide-orgd708f87">
<h3 id="orgd708f87">Yes, Pry is <b>amaaaaaaaaaaazing</b></h3>
</section>
<section id="slide-org4b50fce">
<h3 id="org4b50fce">But, I just use&#x2026;</h3>
</section>
<section id="slide-orge67ba76">
<h3 id="orge67ba76"><code>irb</code>!</h3>
</section>
<section id="slide-org52daf0d">
<h3 id="org52daf0d">Why?</h3>
<p>
Good functionality.
And I just haven't partitioned my config to work in <code>.pryrc</code>.
</p>

</section>
<section id="slide-org22d3409">
<h3 id="org22d3409">Configuration</h3>
<p>
Add Ruby code to <code>$HOME/.irbrc</code>; and elsewhere!
</p>

</section>
<section id="slide-org08ae8c4">
<h3 id="org08ae8c4">The Prompt</h3>
<p>
What I like to know:
</p>

<ul>
<li>Ruby runtime (MRI, JRuby, etc&#x2026;) and version</li>
<li>Rails or Padrino project</li>
<li>Non-development environment</li>

</ul>

</section>
<section id="slide-orgbac918c">
<h3 id="orgbac918c">Ruby runtime and version</h3>
<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.irbrc</span>
versions = {
  <span style="color: #b22222;"># </span><span style="color: #b22222;">RUBY_ENGINE =&gt; "a_prompt_string"</span>
  <span style="color: #8b2252;">"jruby"</span>   =&gt; <span style="color: #8b2252;">"jirb"</span>,
  <span style="color: #8b2252;">"macruby"</span> =&gt; <span style="color: #8b2252;">"macirb"</span>,
  <span style="color: #8b2252;">"rbx"</span>     =&gt; <span style="color: #8b2252;">"irbx"</span>,
  <span style="color: #8b2252;">"ree"</span>     =&gt; <span style="color: #8b2252;">"irbee"</span>
}

target  = <span style="color: #228b22;">Object</span>.const_defined?(<span style="color: #8b2252;">"RUBY_ENGINE"</span>) ? <span style="color: #228b22;">RUBY_ENGINE</span> :
                                                 <span style="color: #228b22;">RUBY_PLATFORM</span>
irbname = versions.fetch(target, <span style="color: #8b2252;">"irb"</span>)

<span style="color: #228b22;">IRB</span>.conf[<span style="color: #008b8b;">:PROMPT</span>][<span style="color: #008b8b;">:CUSTOM</span>] = {
  <span style="color: #008b8b;">:PROMPT_I</span> =&gt; prompt(irbname, <span style="color: #228b22;">RUBY_VERSION</span>),
  <span style="color: #b22222;"># </span><span style="color: #b22222;">more stuff...</span>
}

<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">prompt</span>(name, version)
  <span style="color: #483d8b;">sprintf</span> <span style="color: #8b2252;">"%s [%s] (%s)$ "</span>, name, version, <span style="color: #228b22;">File</span>.basename(<span style="color: #228b22;">Dir</span>.pwd)
<span style="color: #a020f0;">end</span>
</pre>
</div>

</section>
<section id="slide-org07babf0">
<h3 id="org07babf0">Rails Project and Environment</h3>
<div class="org-src-container">

<pre  class="src src-ruby">custom = <span style="color: #228b22;">IRB</span>.conf[<span style="color: #008b8b;">:PROMPT</span>][<span style="color: #008b8b;">:CUSTOM</span>]
<span style="color: #a020f0;">if</span> <span style="color: #a020f0;">defined?</span>(<span style="color: #228b22;">Rails</span>)
  name = <span style="color: #8b2252;">"rails"</span>
  name &lt;&lt; <span style="color: #8b2252;">"-</span><span style="color: #a0522d;">#{Rails.env}</span><span style="color: #8b2252;">"</span> <span style="color: #a020f0;">unless</span> <span style="color: #228b22;">Rails</span>.env.development?

  custom[<span style="color: #008b8b;">:PROMPT_I</span>] = prompt(name, <span style="color: #228b22;">Rails</span>.version)
<span style="color: #a020f0;">elsif</span> <span style="color: #a020f0;">defined?</span>(<span style="color: #228b22;">Padrino</span>)
  name = <span style="color: #8b2252;">"padrino"</span>
  name &lt;&lt; <span style="color: #8b2252;">"-</span><span style="color: #a0522d;">#{ENV["RACK_ENV"]}</span><span style="color: #8b2252;">"</span> <span style="color: #a020f0;">unless</span> <span style="color: #228b22;">ENV</span>[<span style="color: #8b2252;">"RACK_ENV"</span>] == <span style="color: #8b2252;">"development"</span>

  custom[<span style="color: #008b8b;">:PROMPT_I</span>] = prompt(name, <span style="color: #228b22;">Padrino</span>.version)
<span style="color: #a020f0;">end</span>

<span style="color: #228b22;">IRB</span>.conf[<span style="color: #008b8b;">:PROMPT_MODE</span>] = <span style="color: #008b8b;">:CUSTOM</span>
</pre>
</div>

</section>
<section id="slide-org4716439">
<h3 id="org4716439">How it Looks</h3>
<p>
Ruby 2.4.0 in <code>/tmp</code>:
</p>

<div class="org-src-container">

<pre  class="src src-text">irb [2.4.0] (tmp)$
</pre>
</div>

<p>
Rails 4.2.6 console, <i>rails426-test</i> project, production environment:
</p>

<div class="org-src-container">

<pre  class="src src-text">rails [4.2.6] (rails426-test-production)$
</pre>
</div>

<p>
Ruby 1.9.3 under JRuby in <a href="https://github.com/sshaw/jaxb2ruby">jaxb2ruby</a> project:
</p>

<div class="org-src-container">

<pre  class="src src-text">jirb [1.9.3] (jaxb2ruby)$
</pre>
</div>

</section>
<section id="slide-orgd46f042">
<h3 id="orgd46f042">Shortcuts</h3>
<p>
Shorten frequently used things.
</p>

<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.irbrc</span>
<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">i</span>(*m) <span style="color: #483d8b;">include</span> *m; <span style="color: #a020f0;">end</span>
<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">j;</span>  jobs;   <span style="color: #a020f0;">end</span>
<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">q!;</span> quit;   <span style="color: #a020f0;">end</span>
<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">r!;</span> reload! <span style="color: #a020f0;">end</span>
<span style="color: #a0522d;">$E</span> = <span style="color: #228b22;">ENV</span>

<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">r</span>(lib)
  <span style="color: #483d8b;">require</span> lib.to_s
<span style="color: #a020f0;">end</span>

<span style="color: #b22222;"># </span><span style="color: #b22222;">And more!</span>
</pre>
</div>

</section>
<section id="slide-orgf064e69">
<h4 id="orgf064e69"><code>require</code></h4>
<p>
Shortened to <code>r</code>:
</p>

<div class="org-src-container">

<pre  class="src src-text">irb [2.3.5] (ruby)$ r:csv
=&gt; true
irb [2.3.5] (ruby)$ r"itunes/store/transporter"
=&gt; true
</pre>
</div>

</section>
<section id="slide-org70b6dfc">
<h4 id="org70b6dfc"><code>quit</code></h4>
<p>
Shortened to <code>q!</code>:
</p>

<div class="org-src-container">

<pre  class="src src-text">irb [2.3.5] (ruby)$ q!
~/code/ruby &gt;
</pre>
</div>

</section>
<section id="slide-org2eab70a">
<h4 id="org2eab70a"><code>include</code></h4>
<p>
Shortened to <code>i</code>:
</p>

<div class="org-src-container">

<pre  class="src src-text">irb [2.3.5] (foo)$ i iTunes::Store::Transporter, REXML
=&gt; Object
irb [2.3.5] (foo)$ ITMSTransporter.new(options)
=&gt; #&lt;ITunes::Store::Transporter::ITMSTransporter:0x00007fc... &gt;
irb [2.3.5] (foo)$ VERSION
=&gt; "0.2.0"
</pre>
</div>

</section>
<section id="slide-org3960639">
<h3 id="org3960639">Dummy Instances</h3>
<p>
Often necessary for experimentation
</p>

</section>
<section id="slide-org2f6e54a">
<h3 id="org2f6e54a">Normally</h3>
<div class="org-src-container">

<pre  class="src src-text">irb [2.4.0] (ruby)$ h = { "a" =&gt; 1, "b" =&gt; 2, "c" =&gt; 999 }
=&gt; {"a"=&gt;1, "b"=&gt;2, "c"=&gt;999}
irb [2.4.0] (ruby)$ h.select(&amp;:your_amazing_method)
</pre>
</div>

</section>
<section id="slide-org0ee78f8">
<h3 id="org0ee78f8">Pry-Toys</h3>
<p>
Toy objects for Pry (Pry not required)
</p>

<p>
<a href="https://github.com/ariabov/pry-toys">https://github.com/ariabov/pry-toys</a>
</p>

</section>
<section id="slide-org4757570">
<h3 id="org4757570">With Pry-Toys</h3>
<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.irbrc</span>
<span style="color: #a020f0;">begin</span>
  <span style="color: #483d8b;">require</span> <span style="color: #8b2252;">"pry-toys"</span>
<span style="color: #a020f0;">rescue</span> <span style="color: #228b22;">LoadError</span>
  <span style="color: #b22222;"># </span><span style="color: #b22222;">Don't prevent irb from starting</span>
<span style="color: #a020f0;">end</span>
</pre>
</div>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-text">irb [2.4.0] (ruby)$ h = Hash.toy
=&gt; {"a"=&gt;1, "b"=&gt;2, "c"=&gt;3, "d"=&gt;4, "e"=&gt;5, ... }
irb [2.4.0] (ruby)$ h.select(&amp;:your_amazing_method)
</pre>
</div>

<div class="org-src-container">

<pre  class="src src-text">irb [2.4.0] (ruby)$ Array.toy(2, Date)
=&gt; [#&lt;Date: 2018-05-28 ((2458267j,0s,0n),+0s,2299161j)&gt;, ... ]
irb [2.4.0] (ruby)$ String.toy(2)
=&gt; "ppppp mmmmmmmmmm"
</pre>
</div>

</section>
<section id="slide-org64b4117">
<h3 id="org64b4117">Formatting Output</h3>
</section>
<section id="slide-orga757bf9">
<h3 id="orga757bf9">Normally</h3>
<div class="org-src-container">

<pre  class="src src-text">rails [4.2.6] (rails426)$ User.first
=&gt; #&lt;User id: 9, name: "sshaw", age: 2131, created_at: ... &gt;
</pre>
</div>

</section>
<section id="slide-org07fef80">
<h3 id="org07fef80">Hirb</h3>
<p>
A mini view framework for console/irb
</p>

<p>
<a href="https://github.com/cldwalker/hirb">https://github.com/cldwalker/hirb</a>
</p>

</section>
<section id="slide-orgea8d6ce">
<h3 id="orgea8d6ce">With Hirb</h3>
<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.irbrc</span>
<span style="color: #a020f0;">begin</span>
  <span style="color: #483d8b;">require</span> <span style="color: #8b2252;">"hirb"</span>
  <span style="color: #483d8b;">extend</span> <span style="color: #228b22;">Hirb</span>::<span style="color: #228b22;">Console</span>

  <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">hirb!</span>
    <span style="color: #228b22;">Hirb</span>::<span style="color: #228b22;">View</span>.enabled? ? <span style="color: #228b22;">Hirb</span>.disable : <span style="color: #228b22;">Hirb</span>.enable
  <span style="color: #a020f0;">end</span>
<span style="color: #a020f0;">rescue</span> <span style="color: #228b22;">LoadError</span>
<span style="color: #a020f0;">end</span>
</pre>
</div>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-text">rails [4.2.6] (rails426)$ hirb!   # Enable Hirb
=&gt; true
rails [4.2.6] (rails426)$ User.first
+----+-------+------+-------------------------+-------------------------+------+------------+------+
| id | name  | age  | created_at              | updated_at              | shit | listing_id | date |
+----+-------+------+-------------------------+-------------------------+------+------------+------+
| 9  | sshaw | 2131 | 2017-08-05 20:38:45 UTC | 2017-08-05 20:38:45 UTC | 0    |            |      |
+----+-------+------+-------------------------+-------------------------+------+------------+------+
1 row in set
</pre>
</div>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-text">rails [4.2.6] (rails426)$ table Hash.toy(2)
+---+---+
| 0 | 1 |
+---+---+
| a | 1 |
| b | 2 |
+---+---+
2 rows in set
</pre>
</div>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-text">rails [4.2.6] (rails426)$ hirb!  # Disable Hirb
=&gt; false
rails [4.2.6] (rails426)$ User.first
=&gt; #&lt;User id: 9, name: "sshaw", age: 2131, created_at: ... &gt;
</pre>
</div>

</section>
<section id="slide-orgbe32976">
<h3 id="orgbe32976"><code>pp</code></h3>
<p>
It's great:
</p>

<div class="org-src-container">

<pre  class="src src-text">irb [2.3.7] (rails426)$ pp Array.toy(3).map { Hash.toy(3) }
[{"a"=&gt;1, "b"=&gt;2, "c"=&gt;3}, {"a"=&gt;1, "b"=&gt;2, "c"=&gt;3}, ... ]
</pre>
</div>

<p>
Well, if your data is big enough:
</p>

<div class="org-src-container">

<pre  class="src src-text">irb [2.3.7] (rails426)$ pp Array.toy(5).map { Hash.toy(5) }
[{"a"=&gt;1, "b"=&gt;2, "c"=&gt;3, "d"=&gt;4, "e"=&gt;5},
 {"a"=&gt;1, "b"=&gt;2, "c"=&gt;3, "d"=&gt;4, "e"=&gt;5},
 {"a"=&gt;1, "b"=&gt;2, "c"=&gt;3, "d"=&gt;4, "e"=&gt;5},
 {"a"=&gt;1, "b"=&gt;2, "c"=&gt;3, "d"=&gt;4, "e"=&gt;5},
 {"a"=&gt;1, "b"=&gt;2, "c"=&gt;3, "d"=&gt;4, "e"=&gt;5}]
</pre>
</div>

</section>
<section id="slide-org6431339">
<h3 id="org6431339">Awesome Print is Better</h3>
<p>
Pretty print with style in full color and with proper indentation
</p>

<p>
<a href="https://github.com/awesome-print/awesome_print">https://github.com/awesome-print/awesome_print</a>
</p>

</section>
<section id="slide-orga92e8b9">
<h3 id="orga92e8b9">With Awesome Print</h3>
<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.irbrc</span>
<span style="color: #a020f0;">begin</span>
  <span style="color: #483d8b;">require</span> <span style="color: #8b2252;">"ap"</span>
<span style="color: #a020f0;">rescue</span> <span style="color: #228b22;">LoadError</span>
  <span style="color: #b22222;"># </span><span style="color: #b22222;">require "pp" done elsewhere</span>
  <span style="color: #a020f0;">alias</span> ap pp
<span style="color: #a020f0;">end</span>
</pre>
</div>

</section>
<section >


<div class="figure">
<p><img src="img/ap-output.jpg" alt="ap-output.jpg" />
</p>
</div>

</section>
<section id="slide-orgf6ee516">
<h3 id="orgf6ee516">Toggling Output</h3>
<p>
Avoid a wall of text:
</p>

<div class="org-src-container">

<pre  class="src src-text">rails [4.2.10] (foo)$ u = User.joins(:favorites).limit(10)
DEBUG -- :   User Load (9.3ms)  SELECT  `users`.* FROM `users` ...
=&gt; #&lt;ActiveRecord::Relation [#&lt;User id: 1,
email: "sshaw@example.com", created_at: "2010-03-08 02:28:29",
updated_at: "2019-04-21 15:33:18", remember_token_expires_at:
nil, admin: true, avatar: "settings.png", reviews_count: 13,
username: "sshaw", about: "I made this thang...\r\n\r\nAKA The
only place on the ...", favorites_count: 4, recipes_count: 1,
shopping_lists_count: 2, shopify_domain: nil, shopify_token: nil,
hide_profile: false, shopify_created_at: nil,
shopify_trial_expired_email_sent_at: nil,
subscription_price_per_month: nil, subscription_expires_at: nil,
timezone: "US/Eastern", foo__pdf_allowed: false,
default_foo__format: nil, custom_label_format_hack: "se",
&lt;snip wall of text&gt;
</pre>
</div>

</section>
<section id="slide-orgd4372b9">
<h3 id="orgd4372b9"><code>echo!</code></h3>
<p>
Toggle <code>irb</code> result echoing:
</p>

<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.irbrc</span>
<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">echo!</span>
  conf.echo = !conf.echo
<span style="color: #a020f0;">end</span>
</pre>
</div>

<p>
(Yes I know about <code>exp; nil</code>)
</p>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-text">rails [4.2.10] (foo)$ echo! # Turn it off
rails [4.2.10] (foo)$ u = User.joins(:favorites).limit(10)
rails [4.2.10] (foo)$ p u.size
10
rails [4.2.10] (foo)$ echo! # Turn it on
</pre>
</div>

</section>
<section id="slide-orgeb1b9a1">
<h3 id="orgeb1b9a1">Commands</h3>
<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.irbrc</span>
<span style="color: #a020f0;">def</span> <span style="color: #a020f0;">self</span>.<span style="color: #0000ff;">method_missing</span>(name, *args)
  <span style="color: #b22222;"># </span><span style="color: #b22222;">Commands we don't want to execute</span>
  <span style="color: #a020f0;">return</span> <span style="color: #a020f0;">super</span> <span style="color: #a020f0;">if</span> [<span style="color: #008b8b;">:x</span>, <span style="color: #008b8b;">:X</span>].freeze.include?(name)

  <span style="color: #483d8b;">system</span> name.to_s, *args.map(&amp;<span style="color: #008b8b;">:to_s</span>)
  <span style="color: #483d8b;">$?</span>.exitstatus == 127 ? <span style="color: #a020f0;">super</span> : <span style="color: #483d8b;">$?</span>.exitstatus
<span style="color: #a020f0;">end</span>
</pre>
</div>

</section>
<section >

<p>
Now we can run things:
</p>

<div class="org-src-container">

<pre  class="src src-text">irb [2.5.2] (foo)$ pwd
/tmp/foo
=&gt; 0
irb [2.5.2] (foo)$ ls
dir1    dir2    foo.txt
=&gt; 0
</pre>
</div>

</section>
<section id="slide-orgd06d81e">
<h4 id="orgd06d81e">Arguments?</h4>
<p>
😬
</p>

<div class="org-src-container">

<pre  class="src src-text">irb [2.5.2] (foo)$ ls 'dir1'
a.txt   b.txt
=&gt; 0
</pre>
</div>

</section>
<section id="slide-org9e98abf">
<h4 id="org9e98abf">Interpolation</h4>
<p>
🆗
</p>

<div class="org-src-container">

<pre  class="src src-text">irb [2.5.2] (foo)$ x = "dir1"
=&gt; "dir1"
irb [2.5.2] (foo)$ ls #{x}
dir1    dir2    foo.txt
=&gt; 0
</pre>
</div>

</section>
<section id="slide-orgda5213e">
<h4 id="orgda5213e">Read the Docs</h4>
<div class="org-src-container">

<pre  class="src src-text">irb [2.5.2] (foo)$ ri 'Array#each_with_object'
Array#each_with_object

(from ruby site)
Implementation from Enumerable
------------------------------------------------------------------------
&#160; enum.each_with_object(obj) { |(*args), memo_obj| ... } &#160;-&gt; &#160;obj
&#160; enum.each_with_object(obj) &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;-&gt; &#160;an_enumerator

------------------------------------------------------------------------
&lt;snip docs&gt;
</pre>
</div>

</section>
<section id="slide-org842d6c4">
<h4 id="org842d6c4">You Can Always Just&#x2026;</h4>
<p>
Use your shell:
</p>

<div class="org-src-container">

<pre  class="src src-text">irb [2.5.2] (foo)$ bash
/tmp/foo  &gt;ps p $PPID
  PID   TT  STAT      TIME COMMAND
55754 s008  S      0:00.21 irb
/tmp/foo &gt;<span style="text-decoration: underline;">exit</span>
<span style="text-decoration: underline;">exit</span>
=&gt; 0
irb [2.5.2] (foo)$
</pre>
</div>

</section>
<section id="slide-orgc8fb4d5">
<h3 id="orgc8fb4d5">Completion</h3>
</section>
<section id="slide-org5a4ea5c">
<h3 id="org5a4ea5c">Default IRB Completion</h3>
<div class="org-src-container">

<pre  class="src src-text">irb(main):012:0&gt; true.&lt;TAB&gt;
Display all 1866 possibilities? (y or n)
</pre>
</div>

<p>
1866‽
</p>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-text">irb(main):013:0&gt; true.methods.count
=&gt; 66
</pre>
</div>

</section>
<section id="slide-org5367c98">
<h3 id="org5367c98">Another Example</h3>
<div class="org-src-container">

<pre  class="src src-text">irb(main):002:0&gt; {a: 1}.c&lt;TAB&gt;
a:1}.call                  a:1}.clear
a:1}.chunk                 a:1}.clone
a:1}.chunk_while           a:1}.collect
a:1}.class                 a:1}.collect_concat
a:1}.class_eval            a:1}.comment
&lt;snip list&gt;
</pre>
</div>

<p>
<code>#call</code> for <code>Hash</code> ‽
</p>

<div class="org-src-container">

<pre  class="src src-text">irb(main):002:0&gt; {a: 1}.call
Traceback (most recent call last):
        1: from (irb):4
NoMethodError (undefined method `call' for {:a=&gt;1}:Hash)
</pre>
</div>

<p>
‼️
</p>

</section>
<section id="slide-orgd2c8712">
<h3 id="orgd2c8712">Bond</h3>
<p>
Easy custom autocompletion for arguments, methods and beyond.
</p>

<p>
<a href="https://github.com/cldwalker/bond">https://github.com/cldwalker/bond</a>
</p>

</section>
<section id="slide-org5b8110a">
<h3 id="org5b8110a">With Bond</h3>
<div class="org-src-container">

<pre  class="src src-text">true.__id__    true.inspect        true.object_id
true.__send__  true.instance_eval  true.pretty_inspect
&lt;snip list&gt;
</pre>
</div>

<p>
It's accurate!
</p>

</section>
<section >

<p>
No <code>#call</code>:
</p>

<pre  class="example">
irb(main):005:0&gt; {a: 123}.c&lt;TAB&gt;
a:1}.chunk                 a:1}.clear
a:1}.chunk_while           a:1}.clone
a:1}.class                 a:1}.collect
a:1}.class_eval            a:1}.collect_concat
&lt;snip list&gt;
</pre>

</section>
<section id="slide-orgc35955f">
<h3 id="orgc35955f">Hash Key Expansion</h3>
<pre  class="example">
irb [2.4.0] (tmp)$ h = { :a =&gt; 1, :b =&gt; 2, :bee =&gt; "999" }
=&gt; {:a=&gt;1, :b=&gt;2, :bee=&gt;"999"}
irb [2.4.0] (tmp)$ h[:
h[:a    h[:b    h[:bee
irb [2.4.0] (tmp)$ h[:b
h[:b    h[:bee
</pre>

</section>
<section id="slide-org382a988">
<h3 id="org382a988"><code>.bondrc</code></h3>
<p>
Defaults are good, I don't have much:
</p>

<div class="org-src-container">

<pre  class="src src-ruby">complete(<span style="color: #008b8b;">:method</span> =&gt; <span style="color: #8b2252;">"r"</span>, <span style="color: #008b8b;">:action</span> =&gt; <span style="color: #8b2252;">"require"</span>) <span style="color: #b22222;"># </span><span style="color: #b22222;">A</span>
complete(<span style="color: #008b8b;">:method</span> =&gt; <span style="color: #8b2252;">"cd"</span>, <span style="color: #008b8b;">:search</span> =&gt; <span style="color: #008b8b;">:files</span>)   <span style="color: #b22222;"># </span><span style="color: #b22222;">B</span>
</pre>
</div>

</section>
<section >

<p>
<b>A</b>) Treat my <code>r</code> alias like Bond treats <code>require</code>:
</p>

<div class="org-src-container">

<pre  class="src src-text">irb(main):005:0&gt; r "net/&lt;TAB&gt;
net/ftp.rb       net/http/        net/imap.rb      net/protocol.rb
net/http.rb      net/https.rb     net/pop.rb       net/smtp.rb
</pre>
</div>

</section>
<section >

<p>
<b>B</b>) <code>cd</code> (defined in my <code>.irbrc</code>) gets shell-like completion:
</p>

<div class="org-src-container">

<pre  class="src src-text">irb(main):015:0&gt; cd
dir1/    dir2/    foo.txt
irb(main):016:0&gt; cd "dir
dir1/ dir2/
irb(main):017:0&gt; cd "dir1"
=&gt; "/private/tmp/t/dir1"
irb(main):018:0&gt; Dir.pwd
=&gt; "/private/tmp/t/dir1"
</pre>
</div>

</section>
<section id="slide-org6ed4b18">
<h3 id="org6ed4b18">Per Project History and Config</h3>
<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.irbrc</span>
local = <span style="color: #228b22;">File</span>.join(<span style="color: #228b22;">Dir</span>.pwd, <span style="color: #8b2252;">".irbrc"</span>)
<span style="color: #483d8b;">load</span> local <span style="color: #a020f0;">if</span> local != <span style="color: #483d8b;">__FILE__</span> &amp;&amp; <span style="color: #228b22;">File</span>.exist?(local)

local = <span style="color: #228b22;">File</span>.join(<span style="color: #228b22;">Dir</span>.pwd, <span style="color: #8b2252;">".irb-history"</span>)
<span style="color: #228b22;">IRB</span>.conf[<span style="color: #008b8b;">:HISTORY_FILE</span>] = local <span style="color: #a020f0;">if</span> <span style="color: #228b22;">File</span>.exist?(local)
</pre>
</div>

</section>
<section id="slide-orgac9b694">
<h3 id="orgac9b694">A Rails Project's <code>.irbrc</code></h3>
<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">sshaw</span>
  <span style="color: #228b22;">User</span>.find_by_email <span style="color: #8b2252;">"sshaw@example.com"</span>
<span style="color: #a020f0;">end</span>

<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">shopify</span>(&amp;block)
  <span style="color: #228b22;">ShopifyAPI</span>::<span style="color: #228b22;">Session</span>.temp(<span style="color: #228b22;">ENV</span>[<span style="color: #8b2252;">"CTI_SHOPIFY_DOMAIN"</span>],
                           <span style="color: #228b22;">ENV</span>[<span style="color: #8b2252;">"CTI_SHOPIFY_SECRET"</span>],
                           &amp;block)
<span style="color: #a020f0;">end</span>
</pre>
</div>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-text">rails [4.2.10] (foo)$ shopify { ShopifyAPI::Product.find(12312312330) }
rails [4.2.10] (foo)$ sshaw.update!(:email =&gt; "test@example.com")
rails [4.2.10] (foo)$ UserMailer.a_notification(sshaw).deliver_now
</pre>
</div>

</section>
<section id="slide-orgac2c467">
<h3 id="orgac2c467">Bash Like History Ignoring</h3>
<p>
<code>BASH(1)</code>:
</p>

<blockquote nil>
<p>
The HISTCONTROL and HISTIGNORE variables may be  set  to  cause
the  shell to save only a subset of the commands entered.
</p>
</blockquote>

</section>
<section id="slide-orgd92d565">
<h3 id="orgd92d565">Implementation</h3>
<p>
Subclass <code>IRB::ReadlineInputMethod</code> and set <code>IRB.conf[:SCRIPT]</code>
</p>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.irbrc</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">HistoryInputMethod</span> &lt; <span style="color: #228b22;">IRB</span>::<span style="color: #228b22;">ReadlineInputMethod</span>
  <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">gets</span>
    l = <span style="color: #a020f0;">super</span>

    <span style="color: #a020f0;">if</span> ignore_settings.include?(<span style="color: #8b2252;">"ignoreboth"</span>) ||
       ignore_settings.include?(<span style="color: #8b2252;">"ignorespace"</span>)
      <span style="color: #228b22;">HISTORY</span>.pop <span style="color: #a020f0;">and</span> <span style="color: #a020f0;">return</span> l <span style="color: #a020f0;">if</span> <span style="color: #228b22;">HISTORY</span>.size &gt; 0 &amp;&amp;
                                  <span style="color: #228b22;">HISTORY</span>[-1].start_with?(<span style="color: #8b2252;">" "</span>)
    <span style="color: #a020f0;">end</span>

    <span style="color: #a020f0;">if</span> ignore_settings.include?(<span style="color: #8b2252;">"ignoreboth"</span>) ||
       ignore_settings.include?(<span style="color: #8b2252;">"ignoredups"</span>)
      <span style="color: #228b22;">HISTORY</span>.pop <span style="color: #a020f0;">and</span> <span style="color: #a020f0;">return</span> l <span style="color: #a020f0;">if</span> <span style="color: #228b22;">HISTORY</span>.size &gt; 1 &amp;&amp;
                                  <span style="color: #228b22;">HISTORY</span>[-1] == <span style="color: #228b22;">HISTORY</span>[-2]
    <span style="color: #a020f0;">end</span>

    <span style="color: #228b22;">HISTORY</span>.pop <span style="color: #a020f0;">if</span> <span style="color: #228b22;">HISTORY</span>.size &gt; 0 &amp;&amp;
                   ignore_patterns.any? { |pat|
                     <span style="color: #228b22;">HISTORY</span>[-1] =~ pat
                   }

    l
  <span style="color: #a020f0;">end</span>
</pre>
</div>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-ruby">  <span style="color: #b22222;"># </span><span style="color: #b22222;">HistoryInputMethod</span>
  <span style="color: #483d8b;">private</span>

  <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">ignore_patterns</span>
    <span style="color: #a0522d;">@ignore_patterns</span> ||= <span style="color: #228b22;">ENV</span>[<span style="color: #8b2252;">"IRB_HISTIGNORE"</span>].to_s.
                           split(<span style="color: #8b2252;">":"</span>).map { |pat|
                             <span style="color: #228b22;">Regexp</span>.new(pat)
                           }
  <span style="color: #a020f0;">end</span>

  <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">ignore_settings</span>
    <span style="color: #a0522d;">@ignore_settings</span> ||= <span style="color: #228b22;">ENV</span>[<span style="color: #8b2252;">"IRB_HISTCONTROL"</span>].to_s.split(<span style="color: #8b2252;">":"</span>)
  <span style="color: #a020f0;">end</span>
<span style="color: #a020f0;">end</span>
</pre>
</div>

</section>
<section id="slide-orgba3d6c9">
<h3 id="orgba3d6c9">Configure IRB:</h3>
<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.irbrc</span>
<span style="color: #228b22;">IRB</span>.conf[<span style="color: #008b8b;">:SCRIPT</span>] = <span style="color: #228b22;">HistoryInputMethod</span>.new
</pre>
</div>

</section>
<section id="slide-orgb5f4991">
<h3 id="orgb5f4991">Set Environment Variables</h3>
<div class="org-src-container">

<pre  class="src src-bash"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.bash_profile</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">Begins with a space or duplicate entry: ignore it!</span>
<span style="color: #483d8b;">export</span> <span style="color: #a0522d;">IRB_HISTCONTROL</span>=ignoreboth
<span style="color: #b22222;"># </span><span style="color: #b22222;">Pattern to ignore</span>
<span style="color: #483d8b;">export</span> <span style="color: #a0522d;">IRB_HISTIGNORE</span>=<span style="color: #8b2252;">'q!:^\s*r!'</span>
</pre>
</div>

</section>
<section id="slide-org6d5be56">
<h3 id="org6d5be56">Use It!</h3>
<p>
Entries are now excluded from <code>irb</code>'s history:
</p>

<div class="org-src-container">

<pre  class="src src-text"># Begins with a space
rails [4.2.6] (rails426)$  base = 1 &lt;&lt; 10
# q! and r! ignored per IRB_HISTIGNORE
rails [4.2.6] (rails426)$ r!
rails [4.2.6] (rails426)$ q!
rails [4.2.6] (rails426)$ foo_bar
# Duplicates ignored per IRB_HISTCONTROL
rails [4.2.6] (rails426)$ foo_bar
</pre>
</div>

</section>
</section>
<section>
<section id="slide-orgca05cf6">
<h2 id="orgca05cf6">More Rails</h2>
<div class="outline-text-2" id="text-orgca05cf6">
</div>
</section>
<section id="slide-orgb9bc99c">
<h3 id="orgb9bc99c"><code>DISABLE_PRY_RAILS</code></h3>
<p>
So I don't lose my <code>.irbrc</code>:
</p>

<p>
<code>alias rc='DISABLE_PRY_RAILS=1 rails c'</code>
</p>

</section>
<section id="slide-orgf4080b3">
<h3 id="orgf4080b3">More Shortcuts!</h3>
<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.irbrc</span>
<span style="color: #a020f0;">if</span> <span style="color: #a020f0;">defined?</span>(<span style="color: #228b22;">ActiveRecord</span>)
  <span style="color: #a020f0;">class</span> <span style="color: #228b22;">ActiveRecord</span>::<span style="color: #228b22;">Base</span>
    <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">uc</span>(*a)
      update_column(*a)
    <span style="color: #a020f0;">end</span>

    <span style="color: #a020f0;">def</span> <span style="color: #a020f0;">self</span>.<span style="color: #0000ff;">f</span>(*a)
      find(*a)
    <span style="color: #a020f0;">end</span>
  <span style="color: #a020f0;">end</span>

  <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">connection</span>
    <span style="color: #228b22;">ActiveRecord</span>::<span style="color: #228b22;">Base</span>.connection
  <span style="color: #a020f0;">end</span>
</pre>
</div>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-text">rails [5.2.3] (foo)$ u = User.f 123
  User Load (1.1ms)  SELECT  "users".* FROM "users" WHERE ...
=&gt; #&lt;User id: 123, ...
rails [5.2.3] (foo)$ u.uc :active, false
  User Update (30.0ms)  UPDATE "users" SET "active" = $1 WHERE ...
=&gt; true
</pre>
</div>

</section>
<section id="slide-org122a49a">
<h3 id="org122a49a">Validation &amp; Errors</h3>
<p>
A common thing to enter:
</p>

<div class="org-src-container">

<pre  class="src src-text">rails [5.2.3] (foo)$ u.valid? # User model
=&gt; false
rails [5.2.3] (foo)$ u.errors.full_messages.to_sentence
=&gt; "Email can't be blank, Password can't be blank, and ..."
</pre>
</div>

</section>
<section id="slide-orgaf89c18">
<h3 id="orgaf89c18">Create a Helper Method</h3>
<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.irbrc</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">Still in if defined?(ActiveRecord)</span>
<span style="color: #a020f0;">def</span> <span style="color: #0000ff;">arerr</span>(model)
  <span style="color: #a020f0;">return</span> <span style="color: #a020f0;">if</span> model.valid?

  <span style="color: #a020f0;">if</span> <span style="color: #a020f0;">defined?</span> table  <span style="color: #b22222;"># </span><span style="color: #b22222;">if Hirb is loaded</span>
    table(model.errors.full_messages)
  <span style="color: #a020f0;">else</span>
    model.errors.full_messages.to_sentence
  <span style="color: #a020f0;">end</span>
<span style="color: #a020f0;">end</span>
</pre>
</div>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-text">rails [5.2.3] (foo)$ u = User.new
=&gt; #&lt;User id: nil, username: nil ... &gt;
rails [5.2.3] (foo)$ arerr u
=&gt; "Email can't be blank, Password can't be blank, and Owner ..."
</pre>
</div>

</section>
<section id="slide-org4c8bc27">
<h3 id="org4c8bc27">Application Template</h3>
<p>
DSL for adding gems/initializers etc&#x2026; to your freshly created or
existing project.
</p>

<p>
<a href="http://guides.rubyonrails.org/rails_application_templates.html">http://guides.rubyonrails.org/rails_application_templates.html</a>
</p>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-text">&gt; rails new --help | grep -- --template
    -m, [--template=TEMPLATE] # Path to some application template
                              # (can be a filesystem path or URL)
</pre>
</div>

</section>
<section id="slide-org2bd9525">
<h3 id="org2bd9525">My Template</h3>
<div class="outline-text-3" id="text-org2bd9525">
</div>
</section>
<section id="slide-org7d352a7">
<h4 id="org7d352a7">Gems</h4>
<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.rails-template.rb</span>
gem <span style="color: #8b2252;">'kaminari'</span>
gem <span style="color: #8b2252;">'shoulda-matchers'</span>, <span style="color: #008b8b;">:group</span> =&gt; <span style="color: #8b2252;">'test'</span>

gem_group <span style="color: #008b8b;">:development</span> <span style="color: #a020f0;">do</span>
  gem <span style="color: #8b2252;">'pry-toys'</span>
  gem <span style="color: #8b2252;">'capistrano'</span>, <span style="color: #8b2252;">'~&gt; 3.1'</span>
  gem <span style="color: #8b2252;">'capistrano-rails'</span>, <span style="color: #8b2252;">'~&gt; 1.1'</span>
<span style="color: #a020f0;">end</span>

gem_group <span style="color: #008b8b;">:development</span>, <span style="color: #008b8b;">:test</span> <span style="color: #a020f0;">do</span>
  gem <span style="color: #8b2252;">'factory_bot'</span>
  gem <span style="color: #8b2252;">'rspec-rails'</span>
<span style="color: #a020f0;">end</span>
</pre>
</div>

</section>
<section id="slide-orgaef2230">
<h4 id="orgaef2230">Gem Configuration</h4>
<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.rails-template.rb</span>
after_bundle <span style="color: #a020f0;">do</span>
  run <span style="color: #8b2252;">"cap install"</span>
  generate <span style="color: #8b2252;">"rspec:install"</span>
  append_to_file <span style="color: #8b2252;">"spec/rails_helper.rb"</span>, <span style="color: #8b2252;">&lt;&lt;-SHOULDA</span>.strip_heredoc

<span style="color: #8b2252;">    Shoulda::Matchers.configure do |config|</span>
<span style="color: #8b2252;">      config.integrate do |with|</span>
<span style="color: #8b2252;">        with.test_framework :rspec</span>
<span style="color: #8b2252;">        with.library :rails</span>
<span style="color: #8b2252;">      end</span>
<span style="color: #8b2252;">    end</span>
<span style="color: #8b2252;">  SHOULDA</span>
<span style="color: #a020f0;">end</span>
</pre>
</div>

</section>
<section id="slide-org2f6d733">
<h4 id="org2f6d733">Other Stuff</h4>
<div class="org-src-container">

<pre  class="src src-ruby"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.rails-template.rb</span>
environment <span style="color: #8b2252;">"config.active_record.timestamped_migrations = false"</span>
environment <span style="color: #8b2252;">"config.time_zone = 'Eastern Time (US &amp; Canada)'"</span>

run <span style="color: #8b2252;">"rm -f README.*"</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">Keep local history file; loaded by my ~/.irbrc</span>
run <span style="color: #8b2252;">"touch .irb-history"</span>
after_bundle <span style="color: #a020f0;">do</span>
  <span style="color: #b22222;"># </span><span style="color: #b22222;">.gitignore with Rails and macOS entries</span>
  run <span style="color: #8b2252;">"wget -O- -q https://www.gitignore.io/api/rails,osx &gt; .gitignore"</span>
<span style="color: #a020f0;">end</span>
</pre>
</div>

</section>
<section id="slide-orga864298">
<h3 id="orga864298"><code>.railsrc</code></h3>
<p>
<code>rails</code>' config file
</p>

<div class="org-src-container">

<pre  class="src src-text">-m ~/.rails-template.rb -TCSP --skip-spring --skip-turbolinks \
--skip-coffee --skip-active-storage --skip-bootsnap
</pre>
</div>

</section>
</section>
<section>
<section id="slide-org432a1b6">
<h2 id="org432a1b6">Node.js</h2>
<div class="outline-text-2" id="text-org432a1b6">
</div>
</section>
<section id="slide-org82e6bb8">
<h3 id="org82e6bb8">REPL</h3>
<p>
<code>node</code> has a repl:
</p>

<div class="org-src-container">

<pre  class="src src-text">~ &gt;node
Welcome to Node.js v12.4.0.
Type ".help" for more information.
&gt;
</pre>
</div>

</section>
<section id="slide-org47f63e8">
<h3 id="org47f63e8">It Has Good Tab Completion</h3>
<div class="org-src-container">

<pre  class="src src-text">&gt; var o = {a: 1, b: 2}
&gt; o.&lt;TAB&gt;
o.__defineGetter__      o.__defineSetter__
o.__proto__             o.constructor
o.propertyIsEnumerable  o.toLocaleString

o.a                     o.b
</pre>
</div>

</section>
<section id="slide-org0195dc3">
<h3 id="org0195dc3">But No <code>.noderc</code></h3>
<p>
(Or control-r searching)
</p>

</section>
<section id="slide-orgef9f049">
<h3 id="orgef9f049"><code>.noderc</code></h3>
<p>
Like <code>.irbrc</code> but for <code>node</code>.
</p>

</section>
<section id="slide-org66085c1">
<h3 id="org66085c1">How Do We Use It?</h3>
<div class="org-src-container">

<pre  class="src src-shell"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.bashrc</span>
<span style="color: #0000ff;">nsh</span>()
{
    <span style="color: #483d8b;">local</span> <span style="color: #a0522d;">init</span>=<span style="color: #8b2252;">""</span> <span style="color: #a0522d;">path</span>=<span style="color: #8b2252;">"$(</span><span style="color: #ff00ff;">npm</span><span style="color: #8b2252;"> config get prefix)/lib/node_modules"</span>
    [ -f ~/.noderc ] &amp;&amp; <span style="color: #a0522d;">init</span>=$(&lt; ~/.noderc)
    [ -f ./.noderc -a <span style="color: #8b2252;">"$(</span><span style="color: #ff00ff;">pwd</span><span style="color: #8b2252;">)"</span> != <span style="color: #8b2252;">"$HOME"</span> ] &amp;&amp; <span style="color: #8b2252;">\</span>
      <span style="color: #a0522d;">init</span>=<span style="color: #8b2252;">"$init"</span>$<span style="color: #8b2252;">'\n'</span>$(&lt; ./.noderc)

    <span style="color: #a0522d;">NODE_PATH</span>=<span style="color: #8b2252;">"$path"</span> node -i -e <span style="color: #8b2252;">"$init"</span>
}
</pre>
</div>

</section>
<section id="slide-org788c462">
<h3 id="org788c462">My <code>.noderc</code> File</h3>
<div class="org-src-container">

<pre  class="src src-javascript"><span style="color: #b22222;">// </span><span style="color: #b22222;">$HOME/.noderc</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">require a module that may not be installed.</span>
<span style="color: #a020f0;">function</span> <span style="color: #0000ff;">load</span>(<span style="color: #a0522d;">name</span>) {
  <span style="color: #a020f0;">try</span> {
    <span style="color: #a020f0;">return</span> require(name);
  }
  <span style="color: #a020f0;">catch</span>(e) {
    <span style="color: #a020f0;">if</span>(e.code !== <span style="color: #8b2252;">'MODULE_NOT_FOUND'</span>) <span style="color: #a020f0;">throw</span> e;
  }
}

<span style="color: #a020f0;">const</span> <span style="color: #a0522d;">atob</span> = (data) =&gt; Buffer.from(data).toString(<span style="color: #8b2252;">'base64'</span>);
<span style="color: #a020f0;">const</span> <span style="color: #a0522d;">btoa</span> = (data) =&gt; Buffer.from(data, <span style="color: #8b2252;">'base64'</span>).toString(<span style="color: #8b2252;">'ascii'</span>);

<span style="color: #a020f0;">const</span> <span style="color: #a0522d;">r</span> = require,
      t = load(<span style="color: #8b2252;">'prototoy'</span>),
      j = JSON.stringify;

j.dump  = JSON.stringify;
j.parse = JSON.parse;

util.inspect.replDefaults.sorted = <span style="color: #008b8b;">true</span>;
</pre>
</div>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-text">~ &gt;nsh
&gt; const p = r('path')
&gt; p.join('a', 'b')
'a/b'
&gt; j({a: 1, b: [1,2]})
'{"a":1,"b":[1,2]}'
&gt; j.parse('{"a":123}')
{ a: 123 }
&gt; atob('123')
'MTIz'
&gt; btoa(_)
'123'
</pre>
</div>

</section>
<section id="slide-orgfd66570">
<h3 id="orgfd66570"><code>util.inspect.replDefaults.sorted</code></h3>
<blockquote nil>
<p>
sorted &lt;boolean&gt; | &lt;Function&gt; If set to true or a function, all
properties of an object, and Set and Map entries are sorted in the
resulting string. If set to true the default sort is used. If set to a
function, it is used as a compare function.
</p>
</blockquote>

<p>
<a href="https://nodejs.org/api/util.html#util_util_inspect_object_options">https://nodejs.org/api/util.html#util_util_inspect_object_options</a>
</p>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-text">&gt; { z: 1, b: 3, a: 4, y: 5 }
{ z: 1, b: 3, a: 4, y: 5 }
&gt; util.inspect.replDefaults.sorted = <span style="text-decoration: underline;">true</span>
<span style="text-decoration: underline;">true</span>
&gt; { z: 1, b: 3, a: 4, y: 5 }
{ a: 4, b: 3, y: 5, z: 1 }
</pre>
</div>

</section>
<section id="slide-org2ca6ad3">
<h3 id="org2ca6ad3">Dummy Objects</h3>
<p>
Need these in the Node.js shell too!
</p>

</section>
<section id="slide-orgdfc6eac">
<h3 id="orgdfc6eac">Prototoy</h3>
<p>
Lightweight JavaScript object generator for your node REPL
</p>

<p>
<a href="https://github.com/sshaw/prototoy">https://github.com/sshaw/prototoy</a>
</p>

<p>
(Inspired by <a href="https://github.com/ariabov/pry-toys">Pry-Toys</a>)
</p>

</section>
<section id="slide-org11d2339">
<h3 id="org11d2339">With Prototoy</h3>
<div class="org-src-container">

<pre  class="src src-text">&gt; o = t.obj()          // or t.o()
{ a: 1, b: 2, c: 3, d: 4, e: 5, f: 6, g: 7, h: 8, i: 9, j: 10 }
&gt; d = t.arr(2, Date)   // or t.a()
[ 2018-05-28T16:09:29.401Z, 2018-05-29T16:09:29.401Z ]
&gt; d[0].getTime()
1527523793483
&gt; i = t.iter().next()  // or t.i()
{ value: 1, done: false }
</pre>
</div>

</section>
</section>
<section>
<section id="slide-org7aba132">
<h2 id="org7aba132">Command-Line Stuff</h2>
<div class="outline-text-2" id="text-org7aba132">
</div>
</section>
<section id="slide-org6bb5a08">
<h3 id="org6bb5a08"><code>rake</code>, <code>bundle exec</code>, <code>bundle binstubs</code></h3>
</section>
<section id="slide-orgbc35321">
<h3 id="orgbc35321">Ever-Changing and Loooong</h3>
<ul>
<li><code>rake</code></li>
<li><code>bundle exec rake</code></li>
<li><code>./bin/rake</code></li>

</ul>

</section>
<section id="slide-orgc3eaf10">
<h3 id="orgc3eaf10">Just Use the Basename</h3>
<ul>
<li><code>rake db:migrate</code></li>
<li><code>rails g migration</code></li>

</ul>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-shell"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.bashrc</span>
<span style="color: #a020f0;">for</span> cmd<span style="color: #a020f0;"> in</span> cap rails rspec padrino; <span style="color: #a020f0;">do</span>
  <span style="color: #483d8b;">eval</span> <span style="color: #8b2252;">"</span>
<span style="color: #8b2252;">    $cmd() {</span>
<span style="color: #8b2252;">      local exe=\$(</span><span style="color: #ff00ff;">which</span><span style="color: #8b2252;"> $cmd)</span>
<span style="color: #8b2252;">      if [ -x "</span>./bin/$<span style="color: #a0522d;">cmd</span><span style="color: #8b2252;">" ]; then</span>
<span style="color: #8b2252;">        ./bin/$cmd \"\$@\"</span>
<span style="color: #8b2252;">      elif [ -f "</span>./Gemfile<span style="color: #8b2252;">" ]; then</span>
<span style="color: #8b2252;">        bundle exec $cmd \"\$@\"</span>
<span style="color: #8b2252;">      else</span>
<span style="color: #8b2252;">        command $cmd \"\$@\"</span>
<span style="color: #8b2252;">      fi</span>
<span style="color: #8b2252;">    }</span>
<span style="color: #8b2252;">"</span>
<span style="color: #a020f0;">done</span>
</pre>
</div>

</section>
<section id="slide-orgfdee1a1">
<h3 id="orgfdee1a1"><code>tmp</code></h3>
<p>
Easily create and use temp files
</p>

<div class="org-src-container">

<pre  class="src src-sh"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.bashrc</span>
<span style="color: #0000ff;">tmp</span>() {
    <span style="color: #483d8b;">local</span> <span style="color: #a0522d;">path</span>=/tmp/$<span style="color: #a0522d;">RANDOM</span>.tmp
    cat &gt; $<span style="color: #a0522d;">path</span>
    <span style="color: #a0522d;">tmp</span>=$<span style="color: #a0522d;">path</span>
    <span style="color: #483d8b;">echo</span> $<span style="color: #a0522d;">path</span>
}
</pre>
</div>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-text">~ &gt;tmp
foo bar!
/tmp/1868.tmp
~ &gt;cat /tmp/1868.tmp
foo bar!
~ &gt;ruby -pe'sub("bar", "baz")' $tmp
foo baz!
</pre>
</div>

</section>
<section id="slide-orgc8d04d9">
<h3 id="orgc8d04d9">Scratch Files</h3>
<p>
Quickly create and run some random code
</p>

</section>
<section id="slide-orgb9291cb">
<h3 id="orgb9291cb">I Use Emacs</h3>
<div class="org-src-container">

<pre  class="src src-emacs-lisp"><span style="color: #707183;">(</span><span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">scratch</span> <span style="color: #7388d6;">(</span>extension <span style="color: #228b22;">&amp;optional</span> other-window<span style="color: #7388d6;">)</span>
  <span style="color: #8b2252;">"Create a \"scratch\" file with the extension given by EXTENSION.</span>
<span style="color: #8b2252;">The file will be created in `</span><span style="color: #008b8b;">temporary-file-directory</span><span style="color: #8b2252;">' and have the</span>
<span style="color: #8b2252;">basename \"scratch\".</span>
<span style="color: #8b2252;">If `</span><span style="color: #008b8b;">OTHER-WINDOW</span><span style="color: #8b2252;">' is non-nil, open the file using</span>
<span style="color: #8b2252;">`</span><span style="color: #008b8b;">find-file-other-window</span><span style="color: #8b2252;">'."</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">interactive</span> <span style="color: #8b2252;">"MExtension: \nP"</span><span style="color: #7388d6;">)</span>
  <span style="color: #7388d6;">(</span><span style="color: #a020f0;">let</span> <span style="color: #909183;">(</span><span style="color: #709870;">(</span>path <span style="color: #907373;">(</span>concat temporary-file-directory <span style="color: #8b2252;">"scratch"</span>
                      <span style="color: #6276ba;">(</span><span style="color: #a020f0;">if</span> <span style="color: #858580;">(</span>string-match <span style="color: #8b2252;">"\\w"</span> extension<span style="color: #858580;">)</span>
                          <span style="color: #858580;">(</span>concat <span style="color: #8b2252;">"."</span> extension<span style="color: #858580;">)</span><span style="color: #6276ba;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span>
    <span style="color: #909183;">(</span><span style="color: #a020f0;">if</span> other-window
        <span style="color: #709870;">(</span>find-file-other-window path<span style="color: #709870;">)</span>
      <span style="color: #709870;">(</span>find-file path<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

</section>
<section id="slide-org4c381b3">
<h3 id="org4c381b3"><code>M-x scratch</code></h3>

<div class="figure">
<p><img src="img/scratch-minibuffer.png" alt="scratch-minibuffer.png" />
</p>
</div>

</section>
<section >


<div class="figure">
<p><img src="img/scratch-buffer.png" alt="scratch-buffer.png" />
</p>
</div>

</section>
<section id="slide-org8da1173">
<h3 id="org8da1173">Running Them</h3>
<p>
Having to type <code>ruby $TMPDIR/scratch.rb</code> gets annoying
</p>

</section>
<section id="slide-orgbbba552">
<h3 id="orgbbba552">Just Use an Environment Variable</h3>
<div class="org-src-container">

<pre  class="src src-sh"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.bash_profile</span>
<span style="color: #a020f0;">for</span> ext<span style="color: #a020f0;"> in</span> c go groovy java json js pl py rb sh sql xml yml; <span style="color: #a020f0;">do</span>
    <span style="color: #483d8b;">eval</span> <span style="color: #8b2252;">"export SCR$(</span><span style="color: #ff00ff;">echo</span><span style="color: #8b2252;"> $ext | tr a-z A-Z)=${TMPDIR}scratch.$ext"</span>
<span style="color: #a020f0;">done</span>
</pre>
</div>

</section>
<section id="slide-orge4a71f5">
<h3 id="orge4a71f5">Now You Can Do</h3>
<div class="org-src-container">

<pre  class="src src-text">~ &gt;ruby $SCRRB
~ &gt;node $SCRJS
# Etc...
</pre>
</div>

</section>
<section id="slide-org92cf9dd">
<h3 id="org92cf9dd"><code>shopt -s cdable_vars</code></h3>
<p>
My coding directory structure:
</p>

<pre  class="example">
~/code &gt;ls -1
c/
docker/
elisp/
elixir/
erlang/
go/
groovy/
html/
java/
js/
&lt;snip 10+ more&gt;
</pre>

</section>
<section id="slide-org4ba42ec">
<h4 id="org4ba42ec">Sometimes I'm Here</h4>
<pre  class="example">
/Users/sshaw/code/ruby/itunes_store_transporter_web/app/views/jobs/results
</pre>

</section>
<section id="slide-orgaae74cf">
<h4 id="orgaae74cf">And Need to Go Here</h4>
<pre  class="example">
/Users/sshaw/code/go/
</pre>

</section>
<section id="slide-org1c782f0">
<h4 id="org1c782f0">What to Do</h4>
<pre  class="example">
cd ~/code/sshaw/go
</pre>

<p>
No. Well, maybe. But I do:
</p>

<div class="org-src-container">

<pre  class="src src-text">cd go
</pre>
</div>

<p>
Or even:
</p>

<div class="org-src-container">

<pre  class="src src-text">cd $go/batchlabels
</pre>
</div>

</section>
<section id="slide-orgecce4c5">
<h4 id="orgecce4c5">Code</h4>
<div class="org-src-container">

<pre  class="src src-shell"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.bashrc</span>
<span style="color: #483d8b;">shopt</span> -s cdable_vars  <span style="color: #b22222;"># </span><span style="color: #b22222;">... other things too</span>

<span style="color: #a020f0;">for</span> f<span style="color: #a020f0;"> in</span> ~/code/*; <span style="color: #a020f0;">do</span>
    [ -d <span style="color: #8b2252;">"$f"</span> ] &amp;&amp; <span style="color: #483d8b;">export</span> $(<span style="color: #ff00ff;">basename</span> <span style="color: #8b2252;">"$f"</span>)=<span style="color: #8b2252;">"$f"</span>
<span style="color: #a020f0;">done</span>
</pre>
</div>

</section>
<section id="slide-org3525230">
<h3 id="org3525230"><code>shopt -s cdspell</code></h3>
<p>
Fix typos when <code>cd</code> ing
</p>

</section>
<section >

<div class="org-src-container">

<pre  class="src src-text">/tmp/foo &gt;ls
dir1/    dir2/    foo.txt
/tmp/foo &gt;cd dri1
dir1
/tmp/foo/dir1 &gt;
</pre>
</div>

</section>
<section >

<p>
<code>BASH(1)</code>
</p>

<blockquote nil>
<p>
&#x2026; The errors checked for are transposed characters, a missing character,
and one character too
</p>
</blockquote>

</section>
<section id="slide-org54dd688">
<h4 id="org54dd688">Code</h4>
<div class="org-src-container">

<pre  class="src src-shell"><span style="color: #b22222;"># </span><span style="color: #b22222;">$HOME/.bashrc</span>
<span style="color: #483d8b;">shopt</span> -s cdspell  <span style="color: #b22222;"># </span><span style="color: #b22222;">... other things too</span>
</pre>
</div>

</section>
<section id="slide-org095d85f">
<h3 id="org095d85f">ghwd</h3>
<p>
Open the web page of your project using current branch and working directory
</p>

<p>
<a href="https://github.com/github-modules/ghwd">https://github.com/github-modules/ghwd</a>
</p>

</section>
<section id="slide-org7f21a5f">
<h3 id="org7f21a5f">With ghwd</h3>
<div class="org-src-container">

<pre  class="src src-text">~/code/ruby/require3 &gt;g
https://github.com/sshaw/require3/tree/master
/usr/bin/open
</pre>
</div>

</section>
<section >


<div class="figure">
<p><img src="img/require3-homepage.jpg" alt="require3-homepage.jpg" />
</p>
</div>

</section>
<section id="slide-org3bfc38a">
<h3 id="org3bfc38a"><code>s</code></h3>
<p>
Open a web search in your terminal
</p>

<p>
<a href="https://github.com/zquestz/s">https://github.com/zquestz/s</a>
</p>

</section>
<section id="slide-orgc533c8c">
<h3 id="orgc533c8c">Examples</h3>
</section>
<section id="slide-org8e7522c">
<h3 id="org8e7522c">But First</h3>
<div class="org-src-container">

<pre  class="src src-text"># $HOME/.s/config
provider: duckduckgo
</pre>
</div>

<p>
😉
</p>

</section>
<section id="slide-org7a36571">
<h3 id="org7a36571">Search RubyGems</h3>
<div class="org-src-container">

<pre  class="src src-text">~ &gt;s -p ru 'recharge payments'
</pre>
</div>

<p>
<code>-p ru</code> is RubyGems provider
</p>

</section>
<section >


<div class="figure">
<p><img src="img/rubygems-search.png" alt="rubygems-search.png" />
</p>
</div>

</section>
<section id="slide-org18b4123">
<h3 id="org18b4123">Search DuckDuckGo</h3>
<div class="org-src-container">

<pre  class="src src-text">~ &gt;s 'Skye Shaw site:instagram.com'
</pre>
</div>

</section>
<section >


<div class="figure">
<p><img src="img/instagram-search.png" alt="instagram-search.png" />
</p>
</div>

</section>
<section id="slide-org5f2509e">
<h3 id="org5f2509e">There Are <b>a Ton</b> of Providers</h3>
<div class="org-src-container">

<pre  class="src src-text">~ &gt;s -l | wc -l
      88
</pre>
</div>

</section>
</section>
<section>
<section id="slide-org2c84355">
<h2 id="org2c84355">References</h2>
<ul>
<li>My dotfiles: <a href="https://github.com/sshaw/dotfiles">https://github.com/sshaw/dotfiles</a></li>
<li>Bond: <a href="https://github.com/cldwalker/bond">https://github.com/cldwalker/bond</a></li>
<li>ghwd: <a href="https://github.com/github-modules/ghwd">https://github.com/github-modules/ghwd</a></li>
<li>Hirb: <a href="https://github.com/cldwalker/hirb">https://github.com/cldwalker/hirb</a></li>
<li>Node's REPL docs: <a href="https://nodejs.org/api/repl.html#repl_the_node_js_repl">https://nodejs.org/api/repl.html#repl_the_node_js_repl</a></li>
<li>Pry-Toys: <a href="https://github.com/ariabov/pry-toys">https://github.com/ariabov/pry-toys</a></li>
<li>prototoy: <a href="https://github.com/sshaw/prototoy">https://github.com/sshaw/prototoy</a></li>
<li>Rails templates: <a href="https://guides.rubyonrails.org/rails_application_templates.html">https://guides.rubyonrails.org/rails_application_templates.html</a></li>
<li>s: <a href="https://github.com/zquestz/s">https://github.com/zquestz/s</a></li>

</ul>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@3.7.0/lib/js/head.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@3.7.0/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
overview: true,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'default',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.7.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.7.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.7.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.7.0/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.7.0/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
});
</script>
</body>
</html>
